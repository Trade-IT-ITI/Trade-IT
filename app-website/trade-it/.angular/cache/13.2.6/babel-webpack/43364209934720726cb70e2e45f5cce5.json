{"ast":null,"code":"import _asyncToGenerator from \"E:\\\\ITI\\\\Graduation Project\\\\Project\\\\Trade-IT\\\\app-website\\\\trade-it\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { HttpParams } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/city.service\";\nimport * as i2 from \"src/app/services/category.service\";\nimport * as i3 from \"src/app/services/product.service\";\nexport class AddProductComponent {\n  constructor(cityService, categoryService, productService) {\n    this.cityService = cityService;\n    this.categoryService = categoryService;\n    this.productService = productService;\n    this.title = \"\";\n    this.descrioption = \"\";\n    this.price = 1;\n    this.cityId = 0;\n    this.areaId = 0;\n    this.categoryId = 0;\n    this.subcategoryId = 0;\n    this.userId = 0; //location\n\n    this.cities = [];\n    this.areas = [];\n    this.isAreasDisabled = true; //categories\n\n    this.categories = [];\n    this.subcategories = [];\n    this.isSubcategoriesDisabled = true; //product data\n\n    this.image = null;\n    this.fileName = '';\n    this.formData = new FormData();\n  }\n\n  ngOnInit() {\n    let userData = localStorage.getItem('userData');\n    let user = userData != null ? JSON.parse(userData) : null;\n    this.userId = user != null ? user.userId : 0;\n    let CitiesParams = new HttpParams();\n    CitiesParams = CitiesParams.append('expand', 'Areas');\n    this.cityService.getAll(CitiesParams).subscribe(data => {\n      this.cities = data;\n    });\n    let CategoriesParams = new HttpParams();\n    CategoriesParams = CategoriesParams.append('expand', 'Subcategories');\n    this.categoryService.getall(CategoriesParams).subscribe(data => {\n      this.categories = data;\n    });\n  } //location\n\n\n  onSelectCity() {\n    if (this.cityId == 0) {\n      this.isAreasDisabled = true;\n      this.areas = [];\n    } else {\n      let city = this.cities.find(c => c.cityId == this.cityId);\n\n      if (city) {\n        this.isAreasDisabled = false;\n        this.areas = city.areas;\n      }\n    }\n  } //category\n\n\n  onSelectCategory() {\n    if (this.categoryId == 0) {\n      this.isSubcategoriesDisabled = true;\n      this.subcategories = [];\n    } else {\n      let category = this.categories.find(c => c.categoryId == this.categoryId);\n\n      if (category) {\n        this.isSubcategoriesDisabled = false;\n        this.subcategories = category.subcategories;\n      }\n    }\n  }\n\n  onFileSelected(event) {\n    this.image = event.target.files[0];\n\n    if (this.image) {\n      this.fileName = this.image.name;\n    } else {\n      this.fileName = \"\";\n    }\n  }\n\n  addProduct() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.formData.append('title', _this.title);\n\n      _this.formData.append('descrioption', _this.descrioption);\n\n      _this.formData.append('price', _this.price.toString());\n\n      _this.formData.append('cityId', _this.cityId.toString());\n\n      _this.formData.append('areaId', _this.areaId.toString());\n\n      _this.formData.append('subcategoryId', _this.subcategoryId.toString());\n\n      _this.formData.append('userId', _this.userId.toString());\n\n      _this.formData.append(\"image\", _this.image);\n\n      yield _this.productService.addProduct(_this.formData).subscribe(product => {\n        console.log(product);\n      });\n    })();\n  }\n\n}\n\nAddProductComponent.ɵfac = function AddProductComponent_Factory(t) {\n  return new (t || AddProductComponent)(i0.ɵɵdirectiveInject(i1.CityService), i0.ɵɵdirectiveInject(i2.CategoryService), i0.ɵɵdirectiveInject(i3.ProductService));\n};\n\nAddProductComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AddProductComponent,\n  selectors: [[\"app-add-product\"]],\n  decls: 0,\n  vars: 0,\n  template: function AddProductComponent_Template(rf, ctx) {},\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhZGQtcHJvZHVjdC5jb21wb25lbnQuY3NzIn0= */\"]\n});","map":{"version":3,"sources":["E:/ITI/Graduation Project/Project/Trade-IT/app-website/trade-it/src/app/app-pages/product-pages/add-product/add-product.component.ts"],"names":["HttpParams","i0","i1","i2","i3","AddProductComponent","constructor","cityService","categoryService","productService","title","descrioption","price","cityId","areaId","categoryId","subcategoryId","userId","cities","areas","isAreasDisabled","categories","subcategories","isSubcategoriesDisabled","image","fileName","formData","FormData","ngOnInit","userData","localStorage","getItem","user","JSON","parse","CitiesParams","append","getAll","subscribe","data","CategoriesParams","getall","onSelectCity","city","find","c","onSelectCategory","category","onFileSelected","event","target","files","name","addProduct","toString","product","console","log","ɵfac","AddProductComponent_Factory","t","ɵɵdirectiveInject","CityService","CategoryService","ProductService","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","template","AddProductComponent_Template","rf","ctx","styles"],"mappings":"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","sourcesContent":["import { HttpParams } from '@angular/common/http';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"src/app/services/city.service\";\r\nimport * as i2 from \"src/app/services/category.service\";\r\nimport * as i3 from \"src/app/services/product.service\";\r\nexport class AddProductComponent {\r\n    constructor(cityService, categoryService, productService) {\r\n        this.cityService = cityService;\r\n        this.categoryService = categoryService;\r\n        this.productService = productService;\r\n        this.title = \"\";\r\n        this.descrioption = \"\";\r\n        this.price = 1;\r\n        this.cityId = 0;\r\n        this.areaId = 0;\r\n        this.categoryId = 0;\r\n        this.subcategoryId = 0;\r\n        this.userId = 0;\r\n        //location\r\n        this.cities = [];\r\n        this.areas = [];\r\n        this.isAreasDisabled = true;\r\n        //categories\r\n        this.categories = [];\r\n        this.subcategories = [];\r\n        this.isSubcategoriesDisabled = true;\r\n        //product data\r\n        this.image = null;\r\n        this.fileName = '';\r\n        this.formData = new FormData();\r\n    }\r\n    ngOnInit() {\r\n        let userData = localStorage.getItem('userData');\r\n        let user = userData != null ? JSON.parse(userData) : null;\r\n        this.userId = user != null ? user.userId : 0;\r\n        let CitiesParams = new HttpParams();\r\n        CitiesParams = CitiesParams.append('expand', 'Areas');\r\n        this.cityService.getAll(CitiesParams).subscribe(data => {\r\n            this.cities = data;\r\n        });\r\n        let CategoriesParams = new HttpParams();\r\n        CategoriesParams = CategoriesParams.append('expand', 'Subcategories');\r\n        this.categoryService.getall(CategoriesParams).subscribe(data => {\r\n            this.categories = data;\r\n        });\r\n    }\r\n    //location\r\n    onSelectCity() {\r\n        if (this.cityId == 0) {\r\n            this.isAreasDisabled = true;\r\n            this.areas = [];\r\n        }\r\n        else {\r\n            let city = this.cities.find(c => c.cityId == this.cityId);\r\n            if (city) {\r\n                this.isAreasDisabled = false;\r\n                this.areas = city.areas;\r\n            }\r\n        }\r\n    }\r\n    //category\r\n    onSelectCategory() {\r\n        if (this.categoryId == 0) {\r\n            this.isSubcategoriesDisabled = true;\r\n            this.subcategories = [];\r\n        }\r\n        else {\r\n            let category = this.categories.find(c => c.categoryId == this.categoryId);\r\n            if (category) {\r\n                this.isSubcategoriesDisabled = false;\r\n                this.subcategories = category.subcategories;\r\n            }\r\n        }\r\n    }\r\n    onFileSelected(event) {\r\n        this.image = event.target.files[0];\r\n        if (this.image) {\r\n            this.fileName = this.image.name;\r\n        }\r\n        else {\r\n            this.fileName = \"\";\r\n        }\r\n    }\r\n    async addProduct() {\r\n        this.formData.append('title', this.title);\r\n        this.formData.append('descrioption', this.descrioption);\r\n        this.formData.append('price', this.price.toString());\r\n        this.formData.append('cityId', this.cityId.toString());\r\n        this.formData.append('areaId', this.areaId.toString());\r\n        this.formData.append('subcategoryId', this.subcategoryId.toString());\r\n        this.formData.append('userId', this.userId.toString());\r\n        this.formData.append(\"image\", this.image);\r\n        await this.productService.addProduct(this.formData).subscribe((product) => {\r\n            console.log(product);\r\n        });\r\n    }\r\n}\r\nAddProductComponent.ɵfac = function AddProductComponent_Factory(t) { return new (t || AddProductComponent)(i0.ɵɵdirectiveInject(i1.CityService), i0.ɵɵdirectiveInject(i2.CategoryService), i0.ɵɵdirectiveInject(i3.ProductService)); };\r\nAddProductComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: AddProductComponent, selectors: [[\"app-add-product\"]], decls: 0, vars: 0, template: function AddProductComponent_Template(rf, ctx) { }, styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhZGQtcHJvZHVjdC5jb21wb25lbnQuY3NzIn0= */\"] });\r\n"]},"metadata":{},"sourceType":"module"}